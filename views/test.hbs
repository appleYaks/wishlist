<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Ember Tests</title>
    <link rel="stylesheet" href="/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <div id="testRoot"></div>
    <script src="/scripts/vendor.js"></script>
    <script src="/scripts/templates-ember.js"></script>
    <script src="/scripts/dev-ember.js"></script>
    <script src="/mocha.js"></script>
    <script src="/ember-mocha-adapter.js"></script>
    <script src="/expect.js"></script>
    <script>
      var router = require('client/router')['default'];
      router.reopen({
        location: 'none'
      });

      window.ENV = {
        APP: {}
      };

      window.App = require('client/app')['default'].create(window.ENV.APP);
      App.deferReadiness();
      App.rootElement = '#testRoot';
      App.injectTestHelpers();
      App.advanceReadiness();

      describe('Testing test', function () {
        beforeEach(function () {
          visit('/');
        });

        afterEach(function () {
          App.reset();
        });

        it('should redirect to /groups', function () {
          expect(currentURL()).to.equal('/groups');
        });

        it('should test something', function () {
          expect(2).to.equal(2);
        });
      });

      describe('Testing test 2', function () {
        beforeEach(function () {
          visit('groups');
        });

        afterEach(function () {
          App.reset();
        });

        it('should test something else', function () {
          expect(1).to.equal(1);
        });
      });

      Ember.$(function () {
        mocha.run();
      });
    </script>
  </body>
</html>
